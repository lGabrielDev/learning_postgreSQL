#  Aggregate Function

São funcões/methods para manipular as querys.

<br>
<hr>

## Requirements

* Crie a seguinte table no [mockaroo](https://www.mockaroo.com/):

```sql
CREATE TABLE IF NOT EXISTS tb_funcionarios(
employee_id SERIAL PRIMARY KEY,
first_name VARCHAR(40) NOT NULL,
role VARCHAR(40) NOT NULL,
salary INTEGER NOT NULL,
country VARCHAR(40) NOT NULL)
;
```

Os `INSERT INTO` que você vai colocar são esses:

* **employee_id** -> não precisa preencher, pois é SERIAL/AUTO_INCREMENT

* **first_name** -> nome comum

* **role** -> Cargo ('Dev Junior', 'Dev Senior', 'Dev Pleno', 'Estagiário')

* **salary** -> Salário dos empregados

* **country** -> ('Germany','Brazil','Italy','Spain','United States')


<br>
<hr>

## Principais functions

| method/function | description |
| :---            | :---:       |
|COUNT            | Contar      |
|SUM              | Soma        |
|AVG              | Média       | 
|MAX              | Máximo      |
|MIN              | Mínimo      |


<br>
<hr>

### AVG
:pencil2: Tire a **média** de salário dos funcionários com cargo '**Dev Senior**'

```sql
SELECT
    AVG(salary) AS "Média salário"
FROM
    tb_funcionarios
WHERE
    role = 'Dev Senior';
```

<br>
<hr>

### MAX and MIN
:pencil2: Faça uma query e traga o **maior** salário dos funcionários com cargo '**Estagiário**'


```sql
SELECT
    MAX(salary) AS "Maior salário"
FROM
    tb_funcionarios
WHERE
    role = 'Estagiário';
```

<br>

:pencil2: Faça uma query e traga o **menor** salário de todos os funcionários:

```sql
SELECT
    MIN(salary) AS "Menor salário"
FROM tb_funcionarios
```

<br>
<hr>

### COUNT
Retorna a **quantidade de rows** de uma determinada column

<br>

#### Quantidade de rows em um campo específico:
:pencil2: Faça uma query e retorne quantas linhas tem no campo **country**

```sql
SELECT
    COUNT(country) AS "Quantidade de rows"
FROM
    tb_funcionarios;
```

<br>

#### Quantidade de rows da tabela inteira:
```sql
SELECT
    COUNT(*) AS "Quantidade de rows da table"
FROM
    tb_funcionarios;
```

<br>

#### Quantiade de rows de um campo de forma DISTINCT

```sql
SELECT
    COUNT(DISTINCT country) AS "Quantidade de paises"
FROM
    tb_funcionarios;
```

#### Resumindo:

* **`COUNT(*)`** -> quantidade de linhas da table
* **`COUNT(column1)`** -> quantidade de linhas de determinada column
* **`COUNT(DISTINTIC)`** -> quantidade DISTINCT de determinada column


<br>

:warning: A function **`COUNT()`** não contabiliza linhas em branco/null. Ele só vai contar valores preenchidos.

<br>
<hr>


### SUM
Soma todas as rows de uma column


:pencil2: Faça uma query e **some** todos os salários dos funcionários '**Dev Pleno**' e '**Dev Senior**'

```sql
SELECT
    SUM(salary) AS "Salário total"
FROM
    tb_funcionarios
WHERE
    role IN ('Dev Pleno','Dev Senior');
```

<br>
<hr>


### Combinando functions

:pencil2: Faça uma query e traga a **média**, **maior** salário, **menor** salário e a **soma** dos salários de todos os '**Dev Pleno**':


```sql
SELECT
    AVG(salary) AS "Media de salário",
    MAX(salary) AS "Maior salário",
    MIN(salary) AS "menor salário",
    SUM(salary) AS "Total"
FROM
    tb_funcionarios
WHERE
    role = 'Dev Pleno';
```


Essas **'aggregate functions'** funcionam melhor utilizando a **clause** `GROUP BY` que veremos a seguir:

<a href=""><img alt="Ícone de uma seta apontada para direita, representando um link para a próxima página" src="https://cdn-icons-png.flaticon.com/512/8875/8875266.png" width="50px" height="50px" align="right"></a>