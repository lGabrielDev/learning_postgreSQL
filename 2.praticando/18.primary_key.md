<h1 align="center"; style="color:">
    PRIMARY KEY (chave prim√°ria)
    <img src="https://cdn-icons-png.flaticon.com/512/807/807241.png" width="42px" align="right">
</h1> 

## Introduction


Imagine a seguinte table:

| first_name | last_name | gender | date_of_birth | email |
|:--:|:--:|:--:|:--:|:--:|
| Gabriel | Smith | MALE | 09/01/1989 | biel@gmail.com |
| Gabriel | Smith | MALE | 09/01/1989 | bielzin999@gmail.com |



Perceba que temos duas pessoas com o mesmo nome, sobrenome e data de nascimento. Mesmo tendo um e-mail diferente, n√£o conseguimos identificar as rows de forma **UNIQUE**.

A√≠ que entra a **PRIMARY KEY**.

<br>

| passport_number | first_name | last_name | gender | date_of_birth | email |
| :---: |:--:|:--:|:--:|:--:|:--:|
| x4956 | Gabriel | Smith | MALE | 09/01/1989 | biel@gmail.com |
| x4957 | Gabriel | Smith | MALE | 09/01/1989 | bielzin999@gmail.com |


Agora sim, conseguimos identificar uma row de forma **UNIQUE**.

No mundo real, nossos documentos (RG, passport, CPF, Carteira de trabalho, etc...) funcionam como **PRIMARY KEYS**. √â atrav√©s deles que conseguimos nos identificar como pessoas √∫nicas.

N√£o existe dois RGs iguais. Sacou??



Resumindo:

**PRIMARY KEY** -> √â um valor em um campo que identifica um row em uma table.

:bulb: Como boa pr√°tica, toda table precisa ter uma **PRIMARY KEY**. Lembrando que s√≥ pode ter uma **PRIMARY KEY** por table. 

<hr>
<br>

## Definindo uma PRIMARY KEY na criaca√ß√£o da table


Normalmente definimos a **PRIMARY KEY** assim que criamos a table.

Geralmente uma column com PRIMARY KEY sempre ter√° apenas dois tipos de datatype:

* `SERIAL`  -> INT + auto_increment
* `BIGSERIAL` -> BIGINT + auto_increment

<br>

Esses dois datatypes s√£o **INTEGER** e tem **auto_increment**. Ou seja... Sempre que inserir um dado na table, esse campo ser√° automaticamente preenchido.



Tecnicamente, a constraint **PRIMARY KEY** √© a jun√ß√£o das constraints **UNIQUE** and **NOT NULL**.

<br>

### Syntax:

```sql
CONSTRAINT constraint_name PRIMARY KEY(column);
```

<br>

### Definindo na mesma linha do campo


```sql
CREATE TABLE IF NOT EXISTS tb_fodase(
    id BIGSERIAL CONSTRAINT PK_fodase PRIMARY KEY, --informamos na declaracao do campo
    name VARCHAR(40) NOT NULL,
    gender VARCHAR(60) CONSTRAINT check_gender CHECK (gender IN ('MALE', 'FEMALE')) --informamos na declaracao do campo
 );
```
:bulb: Lembrando tamb√©m, que serve para qualquer constraint(UNIQUE, CHECK, PRIMARY KEY, FOREIGN KEY, etc...)

<br>
<br>

### Definindo no final

Primeiro criamos os campos e no final informamos nossas constraints.

Seguindo aquela mesma table:

```sql
CREATE TABLE IF NOT EXISTS tb_fodase(
    id BIGSERIAL,
    name VARCHAR(40) NOT NULL,
    gender VARCHAR(60),

    -- constraints
    CONSTRAINT pk_fodase PRIMARY KEY(id), -- informamos o campo
    CONSTRAINT check_gender CHECK(gender IN ('MALE', 'FEMALE')) -- informamos direto no check
 ); 
```

Perceba que aqui, precisamos especificar qual o campo que vamos atribuir essa constraint.



üí°Sempre escolha o nome das constraints. Fica muito mais f√°cil quando n√≥s definimos o nome. Lembrando tamb√©m, que serve para qualquer constraint(**UNIQUE**, **CHECK**, **PRIMARY KEY**, **FOREIGN KEY**, etc...)

<hr>
<br>


## Dropando uma PRIMARY KEY
Como vimos acima, para dropar uma constraint fazemos assim:

1. Primeiro, descrevemos a table para verificar o nome da constraint:

    ```sql
    \d tb_tal;
    ```

2. Agora √© s√≥ dropar a constraint que n√£o queremos mais:

    ```sql
    ALTER TABLE table_name
    DROP CONSTRAINT constraint_name;
    ```


    Podemos dropar qualquer CONSTRAINT(**PRIMARY KEY**, **CHECK** etc...).

<br>
<hr>



## Adicionando uma Constraint em uma table j√° criada
Existem duas formas de adicionar **PRIMARY KEY** em uma table. A primeira, como vimos antes, √© adicionar assim que criamos a table. 

```sql
CREATE TABLE tb_tal (
    column_1 BIGSERIAL CONSTRAINT constraint_name PRIMARY KEY,
    column_2 data_type,
‚Ä¶
);
```
OU

<br>

```sql
CREATE TABLE tb_tal (
    column_1 BIGSERIAL,
    column_2 data_type,
    -- constraints
    CONSTRAINT constraint_name PRIMARY KEY(column_1)
);
```
<br>

Para adicionar uma constraint em uma table j√° criada, fazemos assim:


```sql
ALTER TABLE tb_tal 
ADD CONSTRAINT pk_tb_tal PRIMARY KEY(id);
```


Mesma syntax dos exemplos acima, por√©m colocamos a keyword `ADD` antes.

"Vamos alterar a estrutura da table, adicionar uma constraint, o nome da constraint √© tal, o tipo da constraint √© **PRIMARY KEY** e dentro passamos a column que vai receber a constraint."

<br>

:pencil2: Crie uma table simples com apenas 2 campos (**id**, **first_name**) e adicione a constraint PRIMARY KEY depois que a table foi criada.


1. Criando a table sem a **PRIMARY KEY**:

    ```sql
    CREATE TABLE IF NOT EXISTS tb_praticando(
    id BIGSERIAL NOT NULL UNIQUE,
    first_name VARCHAR(50) NOT NULL
    );
    ```

2. Adicionando a constraint **PRIMARY KEY** na table:

    ```sql
    ALTER TABLE tb_praticando 
    ADD CONSTRAINT pk_tb_praticando PRIMARY KEY(id);
    ```

3. Describe the table:

    ```sql
    \d tb_praticando;
    ```
    

    <br>

    :warning: N√£o √© poss√≠vel adicionar a constraint **PRIMARY KEY** se as rows da column n√£o forem √∫nicas. Se tiver linhas duplicadas n√£o ser√° poss√≠vel adicionar a constraint.

    A√≠ voc√™ teria que excluir essas rows duplicadas.


    <br>

    :bulb: Poder√≠amos ter adicionado outro tipo de constraint ao inv√©s da constraint **PRIMARY KEY**. Poderia ser adicionado as constraints **FOREIGN KEY**, **CHECK**, **UNIQUE**, etc...

    <br>

    :pencil2: Adicione uma constraint **UNIQUE** para a **column first_name**:

    ```sql
    ALTER TABLE tb_praticando 
    ADD CONSTRAINT unique_first_name UNIQUE (first_name);
    ```

    "Vamos alterar a estrutura da  table, adicionar uma constraint, o nome da constraint √© tal, o tipo da constriant √© **UNIQUE** e dentro passamos o campo que vai receber a constraint."

<br>

<!-- Next Page Button -->
<a href="https://github.com/lGabrielDev/06.postgreSQL/blob/main/2.praticando/19.foreign_key.md">
    <img alt="√çcone de uma seta apontada para direita, representando um link para a pr√≥xima p√°gina" src="https://cdn-icons-png.flaticon.com/512/8875/8875266.png" width="50px" height="50px" align="right">
</a>